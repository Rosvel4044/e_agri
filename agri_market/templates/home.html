{% extends 'base.html' %}
{% block title %}Accueil - e_agri{% endblock %}

{% block extra_css %}
<!-- AOS - Animate On Scroll (tr√®s l√©ger et magnifique) -->
<link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

<style>
    /* Hero */
    .hero {
        background: linear-gradient(rgba(0,0,0,0.45), rgba(0,0,0,0.45)), url('https://images.unsplash.com/photo-1500595046743-ee5c6d2d5d5e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80') center/cover no-repeat;
        min-height: 90vh;
        display: flex;
        align-items: center;
        position: relative;
        color: white;
    }
    .hero::before {
        content: '';
        position: absolute;
        top: 0; left: 0; right: 0; bottom: 0;
        background: linear-gradient(135deg, rgba(46,125,50,0.4) 0%, rgba(107,165,57,0.3) 100%);
    }
    .hero-content {
        position: relative;
        z-index: 2;
    }

    /* Cartes cat√©gories */
    .category-card {
        transition: all 0.4s ease;
        border: none;
        border-radius: 16px;
        overflow: hidden;
        background: white;
        box-shadow: 0 8px 30px rgba(0,0,0,0.08);
    }
    .category-card:hover {
        transform: translateY(-12px) scale(1.04);
        box-shadow: 0 20px 40px rgba(46,125,50,0.25);
    }
    .category-icon {
        font-size: 3.8rem;
        margin-bottom: 1.2rem;
        color: var(--primary);
        transition: transform 0.4s ease;
    }
    .category-card:hover .category-icon {
        transform: scale(1.15) rotate(5deg);
    }

    /* Statistiques */
    .stat-number {
        font-size: 3.8rem;
        font-weight: 800;
        color: white;
    }
    .stat-label {
        font-size: 1.25rem;
        opacity: 0.9;
    }

    /* CTA vendeur */
    .cta-vendeur {
        background: linear-gradient(135deg, #2e7d32 0%, #388e3c 100%);
        border-radius: 20px;
        overflow: hidden;
        box-shadow: 0 15px 35px rgba(0,0,0,0.15);
    }
    .btn-pulse {
        animation: pulse 2s infinite;
    }
    @keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.05); }
        100% { transform: scale(1); }
    }

    /* Responsive */
    @media (max-width: 768px) {
        .hero { min-height: 70vh; }
        .stat-number { font-size: 2.8rem; }
    }
</style>
{% endblock %}

{% block content %}

<!-- Hero -->
<section class="hero" data-aos="fade-up">
    <div class="container hero-content text-center">
        <h1 class="display-3 fw-bold mb-4 text-shadow" data-aos="zoom-in" data-aos-delay="100">
            üå± Bienvenue sur <span class="text-warning">e_agri</span>
        </h1>
        <p class="lead fs-4 mb-5" data-aos="fade-up" data-aos-delay="300">
            Des produits frais, locaux et √©quitables<br>
            <strong>Directement du producteur au consommateur</strong>
        </p>
        <div class="d-flex justify-content-center gap-4 flex-wrap" data-aos="fade-up" data-aos-delay="500">
            <a href="{% url 'agri_market:liste_produits' %}" class="btn btn-light btn-lg px-5 py-3 fw-bold">
                üõí D√©couvrir les produits
            </a>
            {% if not user.is_authenticated %}
                <a href="{% url 'connexion' %}" class="btn btn-outline-light btn-lg px-5 py-3">
                    üë§ Se connecter / S'inscrire
                </a>
            {% endif %}
        </div>
    </div>
</section>

<!-- Avantages -->
<section class="py-5 bg-white">
    <div class="container">
        <h2 class="text-center display-5 fw-bold mb-5" data-aos="fade-up">
            Pourquoi choisir e_agri ?
        </h2>
        <div class="row g-4">
            <div class="col-md-4" data-aos="fade-up" data-aos-delay="100">
                <div class="category-card text-center p-4 h-100">
                    <div class="category-icon">üåø</div>
                    <h4 class="fw-bold mb-3">Produits ultra-frais</h4>
                    <p class="text-muted">R√©colt√©s le jour m√™me ou la veille, garantie de fra√Æcheur maximale.</p>
                </div>
            </div>
            <div class="col-md-4" data-aos="fade-up" data-aos-delay="200">
                <div class="category-card text-center p-4 h-100">
                    <div class="category-icon">ü§ù</div>
                    <h4 class="fw-bold mb-3">Prix justes</h4>
                    <p class="text-muted">Pas d'interm√©diaires : plus d'argent revient directement aux producteurs.</p>
                </div>
            </div>
            <div class="col-md-4" data-aos="fade-up" data-aos-delay="300">
                <div class="category-card text-center p-4 h-100">
                    <div class="category-icon">üöÄ</div>
                    <h4 class="fw-bold mb-3">Commande en 1 clic</h4>
                    <p class="text-muted">Paiement s√©curis√© Mobile Money, livraison rapide ou retrait.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Cat√©gories -->
<section class="bg-light py-5">
    <div class="container">
        <h2 class="text-center display-5 fw-bold mb-5" data-aos="fade-up">Nos cat√©gories phares</h2>
        <div class="row g-4">
            <div class="col-6 col-md-3" data-aos="zoom-in" data-aos-delay="100">
                <a href="{% url 'agri_market:liste_produits' %}" class="text-decoration-none">
                    <div class="category-card text-center py-5">
                        <div class="category-icon">ü•¨</div>
                        <h5 class="fw-bold">L√©gumes</h5>
                    </div>
                </a>
            </div>
            <div class="col-6 col-md-3" data-aos="zoom-in" data-aos-delay="150">
                <a href="{% url 'agri_market:liste_produits' %}" class="text-decoration-none">
                    <div class="category-card text-center py-5">
                        <div class="category-icon">üçé</div>
                        <h5 class="fw-bold">Fruits</h5>
                    </div>
                </a>
            </div>
            <div class="col-6 col-md-3" data-aos="zoom-in" data-aos-delay="200">
                <a href="{% url 'agri_market:liste_produits' %}" class="text-decoration-none">
                    <div class="category-card text-center py-5">
                        <div class="category-icon">üåæ</div>
                        <h5 class="fw-bold">C√©r√©ales & grains</h5>
                    </div>
                </a>
            </div>
            <div class="col-6 col-md-3" data-aos="zoom-in" data-aos-delay="250">
                <a href="{% url 'agri_market:liste_produits' %}" class="text-decoration-none">
                    <div class="category-card text-center py-5">
                        <div class="category-icon">ü•î</div>
                        <h5 class="fw-bold">Tubercules</h5>
                    </div>
                </a>
            </div>
        </div>
        <div class="text-center mt-5" data-aos="fade-up">
            <a href="{% url 'agri_market:liste_produits' %}" class="btn btn-success btn-lg px-5 py-3 fw-bold">
                Voir tous les produits ‚Üí
            </a>
        </div>
    </div>
</section>

<!-- Appel √† l'action vendeurs -->
<section class="py-5">
    <div class="container">
        <div class="cta-vendeur text-white text-center p-5 rounded-4" data-aos="fade-up">
            <h2 class="display-5 fw-bold mb-4">Vous √™tes producteur agricole ?</h2>
            <p class="lead mb-5 fs-4" style="max-width: 800px; margin: 0 auto;">
                Rejoignez des centaines de producteurs qui vendent d√©j√† directement leurs r√©coltes sans interm√©diaires.
            </p>
            <div class="d-flex justify-content-center gap-4 flex-wrap">
                {% if user.is_authenticated and user.role == 'VENDEUR' %}
                    <a href="/vendeur/dashboard/" class="btn btn-light btn-lg px-5 py-3 fw-bold">
                        G√©rer mes produits
                    </a>
                {% else %}
                    <a href="{% url 'inscription' %}" class="btn btn-light btn-lg px-5 py-3 fw-bold btn-pulse">
                        Devenir vendeur maintenant
                    </a>
                {% endif %}
                <a href="#" class="btn btn-outline-light btn-lg px-5 py-3">
                    En savoir plus
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Statistiques -->
<section class="bg-success text-white py-5">
    <div class="container">
        <div class="row text-center">
            <div class="col-md-4 mb-4 mb-md-0" data-aos="fade-up">
                <div class="stat-number" data-count="850">0</div>
                <p class="stat-label">Produits disponibles</p>
            </div>
            <div class="col-md-4 mb-4 mb-md-0" data-aos="fade-up" data-aos-delay="200">
                <div class="stat-number" data-count="220">0</div>
                <p class="stat-label">Producteurs actifs</p>
            </div>
            <div class="col-md-4" data-aos="fade-up" data-aos-delay="400">
                <div class="stat-number" data-count="4500">0</div>
                <p class="stat-label">Commandes livr√©es</p>
            </div>
        </div>
    </div>
</section>

{% endblock %}

{% block extra_js %}
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script>
    AOS.init({
        duration: 800,
        once: true,
        offset: 100
    });

    // Compteur anim√© pour statistiques
    document.querySelectorAll('[data-count]').forEach(el => {
        const target = parseInt(el.getAttribute('data-count'));
        let count = 0;
        const increment = target / 60; // ~1 seconde

        const updateCount = () => {
            count += increment;
            if (count < target) {
                el.textContent = Math.ceil(count).toLocaleString();
                requestAnimationFrame(updateCount);
            } else {
                el.textContent = target.toLocaleString();
            }
        };

        // D√©clencher quand visible
        const observer = new IntersectionObserver(entries => {
            if (entries[0].isIntersecting) {
                updateCount();
                observer.disconnect();
            }
        });
        observer.observe(el);
    });
</script>
{% endblock %}
